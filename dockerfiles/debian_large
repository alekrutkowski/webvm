FROM --platform=i386 i386/debian:buster
ARG DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get -y upgrade && \
	apt-get install -y apt-utils beef bsdgames bsdmainutils ca-certificates clang \
	cowsay cpio cron curl dmidecode dmsetup g++ gcc gdbm-l10n git  \
	hexedit  ifupdown init logrotate lsb-base lshw lua50 luajit lynx make \
	nano netbase nodejs openssl procps python3 python3-cryptography \
	python3-jinja2 python3-numpy python3-pandas python3-pip python3-scipy \
	python3-six python3-yaml readline-common rsyslog ruby sensible-utils \
	ssh systemd systemd-sysv tasksel tasksel-data udev vim wget whiptail \
	xxd iptables isc-dhcp-client isc-dhcp-common kmod less netcat-openbsd \
	r-base \
	r-cran-base64enc \
	r-cran-base64url \
	r-cran-bit \
	r-cran-bit64 \
	r-cran-bitops \
	r-cran-boot \
	r-cran-broom \
	r-cran-cairo \
	r-cran-cairodevice \
	r-cran-callr \
	r-cran-caret \
	r-cran-checkmate \
	r-cran-chron \
	r-cran-class \
	r-cran-cli \
	r-cran-cliapp \
	r-cran-clisymbols \
	r-cran-cluster \
	r-cran-codetools \
	r-cran-colorspace \
	r-cran-commonmark \
	r-cran-crayon \
	r-cran-crosstalk \
	r-cran-curl \
	r-cran-data.table \
	r-cran-dplyr \
	r-cran-dt \
	r-cran-e1071 \
	r-cran-foreign \
	r-cran-formatr \
	r-cran-fs \
	r-cran-future \
	r-cran-gdata \
	r-cran-ggplot2 \
	r-cran-glue \
	r-cran-haven \
	r-cran-htmltable \
	r-cran-htmltools \
	r-cran-htmlwidgets \
	r-cran-httpcode \
	r-cran-httpuv \
	r-cran-httr \
	r-cran-inline \
	r-cran-int64 \
	r-cran-jsonlite \
	r-cran-kernsmooth \
	r-cran-knitr \
	r-cran-lattice \
	r-cran-latticeextra \
	r-cran-lme4 \
	r-cran-lubridate \
	r-cran-magrittr \
	r-cran-matrix \
	r-cran-matrixcalc \
	r-cran-memoise \
	r-cran-mlr \
	r-cran-nlme \
	r-cran-openssl \
	r-cran-openxlsx \
	r-cran-plm \
	r-cran-plotly \
	r-cran-plumber \
	r-cran-png \
	r-cran-processx \
	r-cran-promises \
	r-cran-proto \
	r-cran-ps \
	r-cran-r.cache \
	r-cran-r.methodss3 \
	r-cran-r.oo \
	r-cran-r.utils \
	r-cran-r6 \
	r-cran-rcpp \
	r-cran-rcppannoy \
	r-cran-rcpparmadillo \
	r-cran-rcppeigen \
	r-cran-rcppgsl \
	r-cran-rcppprogress \
	r-cran-rcpproll \
	r-cran-readr \
	r-cran-readstata13 \
	r-cran-readxl \
	r-cran-reshape \
	r-cran-reshape2 \
	r-cran-reticulate \
	r-cran-rmarkdown \
	r-cran-rmpi \
	r-cran-roxygen2 \
	r-cran-rserve \
	r-cran-shiny \
	r-cran-shinyjs \
	r-cran-stringi \
	r-cran-stringr \
	r-cran-svglite \
	r-cran-sys \
	r-cran-tidyr \
	r-cran-tinytex \
	r-cran-utf8 \
	r-cran-uuid \
	r-cran-v8 \
	r-cran-xml2 \
	r-cran-xtable \
	r-cran-zip \
	r-cran-zoo

# Make a user, then copy over the /example directory
RUN useradd -m user && echo "user:password" | chpasswd
COPY --chown=user:user ./examples /home/user/examples
RUN chmod -R +x  /home/user/examples/lua
RUN echo 'root:password' | chpasswd
CMD ["R", "-e", "install.packages(c('fastverse','openxlsx2','eurodata'))"]
CMD [ "/bin/bash" ]
